---
title: "p8105_hw2_fl2569"
author: "Fang Liu"
date: "10/7/2021"
output: github_document
---

## Problem 1

#### Mr. Trash Wheel Data
Specify the sheet in the Excel file and omit non-data entries using arguments in `read_excel`. 

* Use reasonable variable names 
* Omit rows that do not include dumpster-specific data 
* Round the number of sports balls to the nearest integer 

```{r setup, message = FALSE}
library(tidyverse)
library(readxl)
options(tibble.print_min = 5)
```

```{r data_cleaning, message = FALSE}
trash_wheel_df = 
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
                          sheet = "Mr. Trash Wheel", 
                          range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>%
  mutate(sports_balls = round(sports_balls, digits = 0))
```

#### Clean and combine precipitation data
Read and clean the precipitation data for 2018 and 2019:

* Omit rows without precipitation data 
* Add a variable for year

```{r precip, message = FALSE}
#2018 data
precip_2018 =
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
                          sheet = "2018 Precipitation", 
                          skip = 1) %>% 
  janitor::clean_names() %>% 
  mutate(year = 2018) %>% 
  drop_na() 

#2019 data
precip_2019 =
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
                          sheet = "2019 Precipitation", 
                          skip = 1) %>%
  janitor::clean_names() %>% 
  mutate(year = 2019) %>% 
  drop_na()
```

Combine precipitation data sets and convert month (from numeric) to a character variable.
```{r combine}
precip_combined =
  bind_rows(precip_2018, precip_2019) %>% 
  mutate(month = month.name[month])

precip_combined
```

#### Describe the data

The *Mr. Trash Wheel* data has **`r nrow(trash_wheel_df)`** rows and **`r ncol(trash_wheel_df)`** columns. The variables are **`r names(trash_wheel_df)`**. The dataset tells us the volume and weight of trash collected by a certain dumpster on a given day and also include details on the type and quantify of trash collected, such as the number of plastic bottles and sports balls. The median number of sports balls in a dumpster in 2019, for example, is **`r median(pull(trash_wheel_df %>% filter(year == 2019) %>% select(sports_balls)))`**. 

The combined precipitation data for 2018 and 2019 has **`r nrow(precip_combined)`** rows and **`r ncol(precip_combined)`** columns(i.e., `r names(precip_combined)`). The total precipitation in 2018 is **`r sum(pull(precip_combined %>% filter(year == 2018) %>% select(total)))`** inches.


## Problem 2
The goal of this problem is to merge the data in pols-month.csv, unemployment.csv, and snp.csv into a single data frame, using **year** and **month** as keys across data sets. 

#### First, clean the data in pols-month.csv: 
* Use separate() to break up the variable mon into integer variables year,month,day
* Replace month number with month name
* Create a president variable taking values gop and dem; and 
* remove prez_dem, prez_gop, day variable
```{r clean_pols, message = FALSE}
pols_df =
  read_csv("./data/fivethirtyeight_datasets/pols-month.csv") %>% 
  separate(mon, c('year', 'month', 'day'), sep = "-") %>%
  mutate(month = month.name[as.numeric(month)]) %>% 
  mutate(president = ifelse(prez_gop == 1, "gop", "dem")) %>% 
  select(-prez_dem, -prez_gop, -day)
```



## Problem 3 